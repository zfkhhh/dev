1. 子游戏的监控基于Prometheus+ETCD+confd+Grafana实现
2. 监控数据的获取采用pull模式，即业务应用暴露/metrics接口，Prometheus定时来拉取metric数据的方式
3. Prometheus的服务发现基于文件的方式，即Prometheus配置中的target.yml文件，该文件的更新由confd去监听etcd的变更并更新，保证Prometheus能够感知应用的结点变更
4. 业务应用需要在应用启动时将自身提供治理接口的ip:port注册进etcd，并在应用退出时将自身的注册数据从etcd删除，从而使得confd能够准确的更新target文件
5. 线上基于云划分了腾讯云和华为云两套Prometheus，为了在监控面板展示所有环境的内容，所以将Prometheus的数据拉取的数据rmote_write在VictoriaMetrics聚合，提供给Grafana的dashboard做监控数据的渲染。

prometheus本身的问题
1. 不支持高可用部署
2. 没办法横向扩容
3. 使用本地时序数据库存储