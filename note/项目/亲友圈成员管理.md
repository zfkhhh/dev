1. 亲友圈成员管理将亲友圈成员、邀请记录、申请记录分表
2. 亲友圈成员字段包括：user_id, cid（亲友圈id）,按user_id分表
3. 成员加入亲友圈
3.1 用户输入亲友圈id，生成一条申请记录和成员信息（状态为申请中）；所有的管理员、圈主可以看到申请记录，同意就修改申请记录状态和亲友圈成员记录为已加入；通过tcppusher服务器推送用户消息；拒绝也通知用户，并删除亲友圈用户记录
3.2 用户通过邀请加入亲友圈，管理员邀请时会生成邀请记录，往tcppusher发送邀请消息，并往redis的用户的消息队列发送消息（zset）（这里的消息队列用于用户查看消息列表使用）；用户同意邀请，修改邀请记录和创建成员记录，删除redis消息

一些缓存的处理
1. 延时双删
1.1 用户退出亲友圈，用户加入亲友圈，修改数据库中亲友圈成员数据（修改状态或者删除状态）
1.2 删除缓存，包括删除用户所在亲友圈的zset，删除用户在亲友圈的管理员信息
1.3 sleep随机时间，再次删除缓存
2. 缓存穿透处理
2.1 对于查询亲友圈数据，如果redis没查到，mysql没查到，会往redis插入setnx key "disable"
2.2 当查到数据为disable就返回不存在，不再查找mysql