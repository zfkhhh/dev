1. redis的单线程指的是核心操作，如网络io到读取请求内容到命令操作到响应内容是单线程的，像其他持久化、key过期删除、集群数据同步其实是多线程操作的
2. redis4.0,对于慢操作进行了lazy free的优化，慢操作异步化
3. 但是redis的性能瓶颈主要在网络io，较小可能存在的慢操作也在4.0通过慢操作异步优化了，redis6.0将网络io异步化，将网络io交给其他线程执行，主线程执行命令
4. redis是基于reactor模式开发的网络事件处理器，由四个部分组成，多套接字请求，io多路复用，文件事件派发器，事件处理器；对于多客户端请求，会进入一个队列，通过io复用同一个线程
5. redis6.0以前用的是reactor单线程模式，6.0后像多reactor多线程
6. 一次完整的请求
6.1 redis服务启动，监听端口，将连接事件绑定到命令应答处理器
6.2 客户端请求建立连接，连接事件触发，io多路复用epoll将连接事件丢到事件队列，事件分发器将连接事件交给命令应答处理器处理，创建socket连接
6.3 创建socket连接后，将ae_readable事件与命令处理器绑定
6.4 客户端发送命令（get），socket变成可读，io多路复用epoll监听到读事件，将事件丢到事件队列，事件分发器将事件交给绑定的命令处理器，单线程执行命令，从内存读到数据，命令处理器将ae_writable写事件与响应处理器关联，io多路复用写回socket